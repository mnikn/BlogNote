<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>blogNote</title>
  <!--<base href="/">-->

  <script>
    document.write('<base href="' + document.location + '" />');
  </script>

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" type="image/x-icon" href="favicon.ico">
  <link rel="stylesheet" href="./assets/css/semantic.min.css">
</head>
<body>
<app-root>Loading...</app-root>
</body>
<script>
  const remote = require('electron').remote;
  const Menu = remote.Menu;
  var template = [
    {
      label: '编辑',
      submenu: [
        {
          label: '撤销',
          accelerator: 'CmdOrCtrl+Z',
          role: 'undo'
        },
        {
          label: '重做',
          accelerator: 'Shift+CmdOrCtrl+Z',
          role: 'redo'
        },
        {
          type: 'separator'
        },
        {
          label: '剪切',
          accelerator: 'CmdOrCtrl+X',
          role: 'cut'
        },
        {
          label: '复制',
          accelerator: 'CmdOrCtrl+C',
          role: 'copy'
        },
        {
          label: '粘贴',
          accelerator: 'CmdOrCtrl+V',
          role: 'paste'
        },
        {
          label: '全选',
          accelerator: 'CmdOrCtrl+A',
          role: 'selectall'
        },
      ]
    },
    {
      label: '视图',
      submenu: [
        {
          label: '重新加载',
          accelerator: 'CmdOrCtrl+R',
          click: function (item, focusedWindow) {
            if (focusedWindow)
              focusedWindow.reload();
          }
        },
        {
          label: '全屏',
          accelerator: (function () {
            if (process.platform === 'darwin')
              return 'Ctrl+Command+F';
            else
              return 'F11';
          })(),
          click: function (item, focusedWindow) {
            if (focusedWindow)
              focusedWindow.setFullScreen(!focusedWindow.isFullScreen());
          }
        }
      ]
    },
    {
      label: '窗口',
      role: 'window',
      submenu: [
        {
          label: '最小化',
          accelerator: 'CmdOrCtrl+M',
          role: 'minimize'
        },
        {
          label: '关闭',
          accelerator: 'CmdOrCtrl+W',
          role: 'close'
        }
      ]
    },
    {
      label: '帮助',
      role: 'help',
      submenu: [
        {
          label: '了解更多',
          click: function () {
            require('electron').shell.openExternal('http://electron.atom.io')
          }
        }
      ]
    }
  ];

  if (process.platform === 'darwin') {
    var name = require('electron').remote.app.getName();
    template.unshift({
      label: name,
      submenu: [
        {
          label: '关于 ' + name,
          role: 'about'
        },
        {
          type: 'separator'
        },
        {
          label: '设置博客目录',
          role: 'blogDir',
          click: function () {
            const {dialog} = require('electron').remote;
            let blogDir = dialog.showOpenDialog({properties: ['openFile', 'openDirectory', 'multiSelections']});
            require('storejs').set('blogDir', blogDir);
          }
        },
        {
          label: '设置',
          accelerator: 'Command+,',
          role: 'settings'
        },
        {
          type: 'separator'
        },
        {
          label: '隐藏 ' + name,
          accelerator: 'Command+H',
          role: 'hide'
        },
        {
          type: 'separator'
        },
        {
          label: '退出',
          accelerator: 'Command+Q',
          role: 'quit',
          click: function () {
            require('electron').app.quit();
          }
        }
      ]
    });
  }

  var menu = Menu.buildFromTemplate(template);
  Menu.setApplicationMenu(menu);
</script>
</html>
